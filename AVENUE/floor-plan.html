<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ROYAL | Floor Plan Experience</title>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;700&family=Cinzel:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* CORE SETUP */
        :root {
            --royal-gold: #d4af37;
            --royal-gold-dim: rgba(212, 175, 55, 0.3);
            --royal-gold-glow: rgba(212, 175, 55, 0.6);
            --bg-dark: #080808;
            --surface: #121212;
            --text-main: #ffffff;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--bg-dark);
            color: var(--text-main);
            font-family: 'Manrope', sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow-x: hidden;
            background-image: radial-gradient(circle at center, #151515 0%, #000000 100%);
        }
        @media (max-width: 768px) {
            body { overflow-y: auto; padding: 1rem 0 2rem; }
        }
        @media (min-width: 769px) {
            body { cursor: none; overflow: hidden; }
        }

        /* CUSTOM CURSOR (desktop only) */
        .cursor-dot, .cursor-circle {
            position: fixed;
            top: 0;
            left: 0;
            transform: translate(-50%, -50%);
            border-radius: 50%;
            z-index: 9999;
            pointer-events: none;
        }
        .cursor-dot { width: 6px; height: 6px; background: var(--royal-gold); }
        .cursor-circle {
            width: 30px; height: 30px;
            border: 1px solid var(--royal-gold);
            transition: width 0.2s, height 0.2s, background-color 0.2s;
        }
        body.hovering .cursor-circle {
            width: 50px; height: 50px;
            background-color: rgba(212, 175, 55, 0.1);
            border-color: transparent;
            backdrop-filter: blur(2px);
        }
        @media (max-width: 768px) {
            .cursor-dot, .cursor-circle { display: none; }
        }

        /* HEADER */
        header {
            position: absolute;
            top: 1rem;
            text-align: center;
            z-index: 10;
            padding: 0 1rem;
        }
        h1 {
            font-family: 'Cinzel', serif;
            color: var(--royal-gold);
            font-size: 1.2rem;
            letter-spacing: 0.2em;
            text-transform: uppercase;
        }
        p.subtitle {
            font-size: 0.65rem;
            color: #666;
            letter-spacing: 0.15em;
            margin-top: 4px;
        }
        @media (min-width: 769px) {
            header { top: 2rem; }
            h1 { font-size: 1.5rem; letter-spacing: 0.3em; }
            p.subtitle { font-size: 0.75rem; letter-spacing: 0.2em; }
        }

        /* MAP CONTAINER */
        .map-container {
            width: 100%;
            max-width: 1200px;
            height: auto;
            position: relative;
            padding: 12px;
            margin: 0 1rem;
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.8);
            backdrop-filter: blur(10px);
            opacity: 0;
            transform: translateY(20px);
            animation: fadeUp 1.2s cubic-bezier(0.16, 1, 0.3, 1) forwards 0.5s;
        }
        @media (min-width: 769px) {
            .map-container {
                width: 90vw;
                padding: 20px;
                border-radius: 12px;
            }
        }

        /* ZOOM WRAPPER */
        .map-zoom-wrapper {
            position: relative;
            overflow: hidden;
            touch-action: none;
            min-height: 320px;
            border-radius: 6px;
            cursor: grab;
        }
        .map-zoom-wrapper.dragging {
            cursor: grabbing;
        }
        @media (min-width: 480px) {
            .map-zoom-wrapper { min-height: 400px; }
        }
        @media (min-width: 769px) {
            .map-zoom-wrapper { min-height: 500px; }
        }

        /* SVG STYLES */
        .map-svg {
            width: 100%;
            height: auto;
            min-height: 320px;
            overflow: visible;
            transform-origin: center center;
        }
        @media (min-width: 480px) {
            .map-svg { min-height: 400px; }
        }
        @media (min-width: 769px) {
            .map-svg { min-height: 500px; }
        }

        /* ZOOM CONTROLS */
        .zoom-controls {
            position: absolute;
            bottom: 1rem;
            right: 1rem;
            display: flex;
            gap: 4px;
            z-index: 50;
        }
        .zoom-btn {
            width: 40px;
            height: 40px;
            border: 1px solid rgba(212, 175, 55, 0.5);
            background: rgba(10, 10, 10, 0.8);
            color: var(--royal-gold);
            font-size: 1.2rem;
            font-weight: 300;
            cursor: pointer;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }
        .zoom-btn:hover {
            background: rgba(212, 175, 55, 0.2);
            border-color: var(--royal-gold);
        }
        .zoom-btn:active {
            transform: scale(0.95);
        }

        .area-path {
            fill: rgba(20, 20, 20, 0.8);
            stroke: var(--royal-gold-dim);
            stroke-width: 1;
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .area-label {
            fill: #666;
            font-size: 10px;
            font-weight: 600;
            pointer-events: none;
            transition: all 0.3s;
            text-anchor: middle;
            font-family: 'Manrope', sans-serif;
        }

        .corridor-text {
            fill: rgba(212, 175, 55, 0.9);
            font-size: 8px;
            letter-spacing: 0.2em;
            text-anchor: middle;
            font-weight: 700;
            font-family: 'Manrope', sans-serif;
        }
        @media (min-width: 480px) {
            .corridor-text { font-size: 9px; }
        }
        @media (min-width: 769px) {
            .corridor-text { font-size: 10px; letter-spacing: 0.25em; }
        }
        .corridor-line {
            stroke: rgba(212, 175, 55, 0.5);
            stroke-width: 1.5;
        }

        .interactive-group {
            cursor: none;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        @media (max-width: 768px) {
            .interactive-group { cursor: pointer; }
        }

        .interactive-group:hover .area-path {
            fill: var(--royal-gold);
            stroke: #fff;
            filter: drop-shadow(0 0 8px var(--royal-gold-glow));
            transform: scale(1.02);
            transform-box: fill-box;
            transform-origin: center;
        }

        .interactive-group:hover .area-label {
            fill: #000;
            font-weight: 800;
        }

        .palco-area {
            fill: #111;
            stroke: #333;
            stroke-dasharray: 5,5;
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .interactive-group:hover .palco-area {
            fill: #1a1a1a;
            stroke: var(--royal-gold);
            filter: drop-shadow(0 0 8px var(--royal-gold-glow));
        }
        .interactive-group:hover .palco-area + .area-label {
            fill: var(--royal-gold) !important;
        }

        .stairs {
            stroke: rgba(212, 175, 55, 0.4);
            stroke-width: 1;
        }
        .lounge-area {
            fill: rgba(212, 175, 55, 0.08);
            stroke: rgba(212, 175, 55, 0.5);
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .interactive-group:hover .lounge-area {
            fill: rgba(212, 175, 55, 0.2);
            stroke: var(--royal-gold);
            filter: drop-shadow(0 0 8px var(--royal-gold-glow));
        }
        .marker-a {
            fill: none;
            stroke: rgba(212, 175, 55, 0.5);
            stroke-width: 1;
            cursor: pointer;
            transition: all 0.3s;
        }
        .marker-a:hover,
        .interactive-group:hover .marker-a {
            stroke: var(--royal-gold);
            fill: rgba(212, 175, 55, 0.2);
            filter: drop-shadow(0 0 6px var(--royal-gold-glow));
        }

        .draw-anim {
            stroke-dasharray: 1000;
            stroke-dashoffset: 1000;
            animation: drawLine 2s ease-out forwards 1s;
        }

        @keyframes drawLine {
            to { stroke-dashoffset: 0; }
        }

        @keyframes fadeUp {
            to { opacity: 1; transform: translateY(0); }
        }

        /* TOOLTIP - fixo no centro do mapa */
        #tooltip {
            position: absolute;
            left: 50%;
            top: 52%;
            transform: translate(-50%, -50%);
            background: rgba(10, 10, 10, 0.97);
            border: 1px solid var(--royal-gold);
            padding: 12px 16px;
            border-radius: 8px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.15s ease;
            z-index: 100;
            backdrop-filter: blur(16px);
            min-width: 140px;
            max-width: 90%;
            box-shadow: 0 12px 48px rgba(0,0,0,0.95), 0 0 0 1px rgba(212,175,55,0.15);
        }
        @media (min-width: 769px) {
            #tooltip {
                padding: 18px 22px;
                border-radius: 10px;
                min-width: 180px;
                max-width: 240px;
            }
        }

        #tooltip h3 {
            color: var(--royal-gold);
            font-size: 0.8rem;
            margin-bottom: 4px;
            font-family: 'Cinzel', serif;
            border-bottom: 1px solid #333;
            padding-bottom: 4px;
        }
        #tooltip p {
            color: #ccc;
            font-size: 0.7rem;
            display: flex;
            justify-content: space-between;
        }
        #tooltip .status {
            font-size: 0.6rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 6px;
            color: #4ade80;
        }
        @media (min-width: 769px) {
            #tooltip h3 { font-size: 0.9rem; margin-bottom: 5px; padding-bottom: 5px; }
            #tooltip p { font-size: 0.75rem; }
            #tooltip .status { font-size: 0.65rem; margin-top: 8px; }
        }

        .redbull-path { stroke: #ff4444; stroke-opacity: 0.5; }
        .interactive-group.redbull:hover .redbull-path { fill: #ff4444; stroke: white; }

        /* BACK BUTTON */
        .btn-back {
            position: fixed;
            top: 1.5rem;
            left: 1.5rem;
            z-index: 100;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            border: 1px solid var(--royal-gold);
            background: rgba(0, 0, 0, 0.5);
            color: var(--royal-gold);
            text-decoration: none;
            transition: all 0.3s;
            box-shadow: 0 0 20px var(--royal-gold-dim);
        }
        .btn-back:hover {
            background: var(--royal-gold);
            color: #000;
            box-shadow: 0 0 30px var(--royal-gold-glow);
            transform: scale(1.05);
        }
        .btn-back svg {
            width: 20px;
            height: 20px;
        }
        @media (max-width: 768px) {
            .btn-back { top: 1rem; left: 1rem; width: 40px; height: 40px; }
            .btn-back svg { width: 18px; height: 18px; }
        }
    </style>
</head>
<body>

    <div class="cursor-dot"></div>
    <div class="cursor-circle"></div>

    <a href="../apresentacao_royal.html#ato3" class="btn-back" title="Voltar à seção do mapa">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
        </svg>
    </a>

    <header>
        <h1>MAPA DA CASA</h1>
        <p class="subtitle">SELECIONE SUA EXPERIÊNCIA</p>
    </header>

    <div class="map-container">
        <div id="tooltip">
            <h3>AREA NAME</h3>
            <p>Capacidade: <span>10 pax</span></p>
            <p>Consumação: <span>R$ 2k</span></p>
            <div class="status">DISPONÍVEL</div>
        </div>

        <div class="map-zoom-wrapper" id="zoomWrapper">
            <svg class="map-svg" id="mapSvg" viewBox="0 0 1000 600" preserveAspectRatio="xMidYMid meet">

            <!-- Corredores com destaque -->
            <line x1="200" y1="55" x2="800" y2="55" class="corridor-line"/>
            <text x="500" y="48" class="corridor-text">CORREDOR CAMAROTE LATERAL</text>
            <line x1="200" y1="545" x2="800" y2="545" class="corridor-line"/>
            <text x="500" y="555" class="corridor-text">CORREDOR CAMAROTE SUPERIOR</text>

            <!-- CAMAROTES L1-L7 -->
            <g class="interactive-group" data-name="CAMAROTE L1" data-pax="15" data-val="R$ 5.000">
                <rect class="area-path draw-anim" x="350" y="80" width="60" height="90" />
                <text x="380" y="130" class="area-label">L1</text>
            </g>
            <g class="interactive-group" data-name="CAMAROTE L2" data-pax="15" data-val="R$ 5.000">
                <rect class="area-path draw-anim" x="420" y="80" width="60" height="90" />
                <text x="450" y="130" class="area-label">L2</text>
            </g>
            <g class="interactive-group" data-name="CAMAROTE L3" data-pax="15" data-val="R$ 5.000">
                <rect class="area-path draw-anim" x="490" y="80" width="60" height="90" />
                <text x="520" y="130" class="area-label">L3</text>
            </g>
            <g class="interactive-group" data-name="CAMAROTE L4" data-pax="15" data-val="R$ 5.000">
                <rect class="area-path draw-anim" x="560" y="80" width="60" height="90" />
                <text x="590" y="130" class="area-label">L4</text>
            </g>
            <g class="interactive-group" data-name="CAMAROTE L5" data-pax="15" data-val="R$ 5.000">
                <rect class="area-path draw-anim" x="630" y="80" width="60" height="90" />
                <text x="660" y="130" class="area-label">L5</text>
            </g>
            <g class="interactive-group" data-name="CAMAROTE L6" data-pax="15" data-val="R$ 5.000">
                <rect class="area-path draw-anim" x="700" y="80" width="60" height="90" />
                <text x="730" y="130" class="area-label">L6</text>
            </g>
            <g class="interactive-group" data-name="CAMAROTE L7 (MASTER)" data-pax="25" data-val="R$ 10.000" data-tooltip-side="left">
                <path class="area-path draw-anim" d="M770 80 H820 V180 H770 V80 Z" />
                <text x="795" y="130" class="area-label">L7</text>
            </g>

            <!-- CAMAROTES M1-M5 (modal acima - na frente da área) -->
            <g class="interactive-group" data-name="CAMAROTE M1" data-pax="12" data-val="R$ 4.000" data-tooltip-pos="top">
                <rect class="area-path draw-anim" x="180" y="420" width="80" height="80" />
                <text x="220" y="465" class="area-label">M1</text>
            </g>
            <g class="interactive-group" data-name="CAMAROTE M2" data-pax="12" data-val="R$ 4.000" data-tooltip-pos="top">
                <rect class="area-path draw-anim" x="270" y="420" width="80" height="80" />
                <text x="310" y="465" class="area-label">M2</text>
            </g>
            <g class="interactive-group" data-name="CAMAROTE M3" data-pax="12" data-val="R$ 4.000" data-tooltip-pos="top">
                <rect class="area-path draw-anim" x="360" y="420" width="80" height="80" />
                <text x="400" y="465" class="area-label">M3</text>
            </g>
            <g class="interactive-group" data-name="CAMAROTE M4" data-pax="12" data-val="R$ 4.000" data-tooltip-pos="top">
                <rect class="area-path draw-anim" x="450" y="420" width="80" height="80" />
                <text x="490" y="465" class="area-label">M4</text>
            </g>
            <g class="interactive-group" data-name="CAMAROTE M5" data-pax="12" data-val="R$ 4.000" data-tooltip-pos="top">
                <rect class="area-path draw-anim" x="540" y="420" width="80" height="80" />
                <text x="580" y="465" class="area-label">M5</text>
            </g>

            <!-- Red Bull Stage -->
            <g class="interactive-group redbull" data-name="RED BULL STAGE" data-pax="50" data-val="SOB CONSULTA">
                <path class="area-path redbull-path draw-anim" d="M50 80 H140 V200 L50 240 V80 Z" />
                <text x="95" y="160" class="area-label" transform="rotate(-90 95 160)" style="fill:#aaa">RB STAGE</text>
            </g>

            <!-- Acesso ao Lounge (interativo + escadas) -->
            <g class="interactive-group" data-name="ACESSO AO LOUNGE" data-pax="VIP" data-val="EXCLUSIVO">
                <rect class="lounge-area draw-anim" x="150" y="240" width="55" height="120" rx="2" />
                <text x="177" y="302" class="area-label" transform="rotate(-90 177 302)">ACESSO AO LOUNGE</text>
            </g>
            <!-- Escadas (degraus em dourado) -->
            <g class="stairs-group">
                <line x1="150" y1="252" x2="235" y2="252" class="stairs"/>
                <line x1="150" y1="264" x2="235" y2="264" class="stairs"/>
                <line x1="150" y1="276" x2="235" y2="276" class="stairs"/>
                <line x1="150" y1="288" x2="235" y2="288" class="stairs"/>
                <line x1="150" y1="300" x2="235" y2="300" class="stairs"/>
                <line x1="150" y1="312" x2="235" y2="312" class="stairs"/>
                <line x1="150" y1="324" x2="235" y2="324" class="stairs"/>
                <line x1="150" y1="336" x2="235" y2="336" class="stairs"/>
                <line x1="150" y1="348" x2="235" y2="348" class="stairs"/>
            </g>
            <!-- Marcadores A1-A4 -->
            <g class="interactive-group" data-name="ÁREA A1" data-pax="4" data-val="R$ 1.200">
                <circle class="marker-a draw-anim" cx="230" cy="115" r="12"/>
                <text x="230" y="118" class="area-label" style="font-size: 8px" text-anchor="middle" dominant-baseline="middle">A1</text>
            </g>
            <g class="interactive-group" data-name="ÁREA A2" data-pax="4" data-val="R$ 1.200">
                <circle class="marker-a draw-anim" cx="255" cy="115" r="12"/>
                <text x="255" y="118" class="area-label" style="font-size: 8px" text-anchor="middle" dominant-baseline="middle">A2</text>
            </g>
            <g class="interactive-group" data-name="ÁREA A3" data-pax="4" data-val="R$ 1.200">
                <circle class="marker-a draw-anim" cx="230" cy="140" r="12"/>
                <text x="230" y="143" class="area-label" style="font-size: 8px" text-anchor="middle" dominant-baseline="middle">A3</text>
            </g>
            <g class="interactive-group" data-name="ÁREA A4" data-pax="4" data-val="R$ 1.200">
                <circle class="marker-a draw-anim" cx="255" cy="140" r="12"/>
                <text x="255" y="143" class="area-label" style="font-size: 8px" text-anchor="middle" dominant-baseline="middle">A4</text>
            </g>

            <!-- FRONT 01 e 02 (modal à esquerda - áreas no canto direito) -->
            <g class="interactive-group" data-name="FRONT 01" data-pax="20" data-val="R$ 7.000" data-tooltip-side="left">
                <rect class="area-path draw-anim" x="770" y="220" width="60" height="80" />
                <text x="800" y="265" class="area-label" transform="rotate(-90 800 265)">FRONT 1</text>
            </g>
            <g class="interactive-group" data-name="FRONT 02" data-pax="20" data-val="R$ 7.000" data-tooltip-side="left">
                <rect class="area-path draw-anim" x="770" y="320" width="60" height="80" />
                <text x="800" y="365" class="area-label" transform="rotate(-90 800 365)">FRONT 2</text>
            </g>

            <!-- SIDE e DJ (modal à esquerda - áreas no canto direito do mapa) -->
            <g class="interactive-group" data-name="SIDE STAGE" data-pax="15" data-val="R$ 6.000" data-tooltip-side="left">
                <rect class="area-path draw-anim" x="770" y="440" width="80" height="60" />
                <text x="810" y="475" class="area-label">SIDE</text>
            </g>
            <g class="interactive-group" data-name="DJ BOOTH" data-pax="RESTRICTED" data-val="---" data-tooltip-side="left">
                <rect class="area-path draw-anim" x="860" y="440" width="80" height="60" style="stroke: #555" />
                <text x="900" y="475" class="area-label">DJ</text>
            </g>

            <!-- PALCO (modal à esquerda - área no canto direito) -->
            <g class="interactive-group" data-name="PALCO PRINCIPAL" data-pax="ARTISTAS" data-val="---" data-tooltip-side="left">
                <rect class="palco-area area-path" x="850" y="100" width="120" height="320" rx="4" />
                <text x="910" y="260" class="area-label" transform="rotate(-90 910 260)" style="fill: #333; font-size: 20px; letter-spacing: 5px;">PALCO</text>
            </g>

            <!-- MESAS P1-P7 -->
            <g class="interactive-group" data-name="MESA P1" data-pax="4" data-val="R$ 1.500">
                <circle class="area-path draw-anim" cx="700" cy="200" r="15" />
                <text x="700" y="200" class="area-label" style="font-size: 8px" text-anchor="middle" dominant-baseline="middle">P1</text>
            </g>
            <g class="interactive-group" data-name="MESA P2" data-pax="4" data-val="R$ 1.500">
                <circle class="area-path draw-anim" cx="650" cy="200" r="15" />
                <text x="650" y="200" class="area-label" style="font-size: 8px" text-anchor="middle" dominant-baseline="middle">P2</text>
            </g>
            <g class="interactive-group" data-name="MESA P3" data-pax="4" data-val="R$ 1.500">
                <circle class="area-path draw-anim" cx="600" cy="200" r="15" />
                <text x="600" y="200" class="area-label" style="font-size: 8px" text-anchor="middle" dominant-baseline="middle">P3</text>
            </g>
            <g class="interactive-group" data-name="MESA P4" data-pax="4" data-val="R$ 1.500">
                <circle class="area-path draw-anim" cx="550" cy="200" r="15" />
                <text x="550" y="200" class="area-label" style="font-size: 8px" text-anchor="middle" dominant-baseline="middle">P4</text>
            </g>
            <g class="interactive-group" data-name="MESA P5" data-pax="4" data-val="R$ 1.500">
                <circle class="area-path draw-anim" cx="500" cy="200" r="15" />
                <text x="500" y="200" class="area-label" style="font-size: 8px" text-anchor="middle" dominant-baseline="middle">P5</text>
            </g>
            <g class="interactive-group" data-name="MESA P6" data-pax="4" data-val="R$ 1.500">
                <circle class="area-path draw-anim" cx="450" cy="200" r="15" />
                <text x="450" y="200" class="area-label" style="font-size: 8px" text-anchor="middle" dominant-baseline="middle">P6</text>
            </g>
            <g class="interactive-group" data-name="MESA P7" data-pax="4" data-val="R$ 1.500">
                <circle class="area-path draw-anim" cx="400" cy="200" r="15" />
                <text x="400" y="200" class="area-label" style="font-size: 8px" text-anchor="middle" dominant-baseline="middle">P7</text>
            </g>
        </svg>
        </div>

        <div class="zoom-controls">
            <button class="zoom-btn" id="zoomOut" aria-label="Diminuir zoom">−</button>
            <button class="zoom-btn" id="zoomIn" aria-label="Aumentar zoom">+</button>
        </div>
    </div>

    <script>
        const cursorDot = document.querySelector('.cursor-dot');
        const cursorCircle = document.querySelector('.cursor-circle');
        const tooltip = document.getElementById('tooltip');
        const interactiveAreas = document.querySelectorAll('.interactive-group');
        const body = document.body;

        document.addEventListener('mousemove', (e) => {
            cursorDot.style.left = e.clientX + 'px';
            cursorDot.style.top = e.clientY + 'px';
            cursorCircle.style.left = e.clientX + 'px';
            cursorCircle.style.top = e.clientY + 'px';
        });

        function showTooltip(area) {
            body.classList.add('hovering');
            tooltip.innerHTML = `
                <h3>${area.getAttribute('data-name')}</h3>
                <p>Pax: <span>${area.getAttribute('data-pax')}</span></p>
                <p>Min: <span>${area.getAttribute('data-val')}</span></p>
                <div class="status">● DISPONÍVEL</div>
            `;
            tooltip.style.opacity = '1';
        }
        function hideTooltip() {
            body.classList.remove('hovering');
            tooltip.style.opacity = '0';
        }

        interactiveAreas.forEach(area => {
            area.addEventListener('mouseenter', () => showTooltip(area));
            area.addEventListener('mouseleave', hideTooltip);
            area.addEventListener('touchstart', (e) => {
                e.preventDefault();
                showTooltip(area);
            }, { passive: false });
        });

        document.addEventListener('touchend', (e) => {
            if (!e.target.closest('.interactive-group') && !e.target.closest('#tooltip')) {
                hideTooltip();
            }
        });

        // ZOOM E PAN
        const zoomWrapper = document.getElementById('zoomWrapper');
        const mapSvg = document.getElementById('mapSvg');
        const zoomInBtn = document.getElementById('zoomIn');
        const zoomOutBtn = document.getElementById('zoomOut');

        let scale = 1, translateX = 0, translateY = 0;
        const MIN_SCALE = 0.5, MAX_SCALE = 3, ZOOM_STEP = 0.25;
        let isDragging = false, startX, startY, startTranslateX, startTranslateY;
        let lastPinchDist = null, lastPinchCenter = null;

        function applyTransform() {
            mapSvg.style.transform = `translate(${translateX}px, ${translateY}px) scale(${scale})`;
        }

        function zoom(delta, centerX, centerY) {
            const rect = zoomWrapper.getBoundingClientRect();
            const cx = centerX ?? rect.left + rect.width / 2;
            const cy = centerY ?? rect.top + rect.height / 2;

            const newScale = Math.min(MAX_SCALE, Math.max(MIN_SCALE, scale + delta));
            const prevScale = scale;
            scale = newScale;

            const centerXRel = rect.left + rect.width / 2;
            const centerYRel = rect.top + rect.height / 2;
            translateX += (cx - centerXRel - translateX) * (1 - newScale / prevScale);
            translateY += (cy - centerYRel - translateY) * (1 - newScale / prevScale);

            applyTransform();
        }

        zoomInBtn.addEventListener('click', () => zoom(ZOOM_STEP));
        zoomOutBtn.addEventListener('click', () => zoom(-ZOOM_STEP));

        zoomWrapper.addEventListener('wheel', (e) => {
            e.preventDefault();
            zoom(e.deltaY > 0 ? -0.15 : 0.15, e.clientX, e.clientY);
        }, { passive: false });

        zoomWrapper.addEventListener('mousedown', (e) => {
            if (e.target.closest('.zoom-btn')) return;
            isDragging = true;
            zoomWrapper.classList.add('dragging');
            startX = e.clientX;
            startY = e.clientY;
            startTranslateX = translateX;
            startTranslateY = translateY;
        });
        document.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            translateX = startTranslateX + (e.clientX - startX);
            translateY = startTranslateY + (e.clientY - startY);
            applyTransform();
        });
        document.addEventListener('mouseup', () => {
            isDragging = false;
            zoomWrapper.classList.remove('dragging');
        });

        zoomWrapper.addEventListener('touchstart', (e) => {
            if (e.touches.length === 2) {
                lastPinchDist = Math.hypot(e.touches[1].clientX - e.touches[0].clientX, e.touches[1].clientY - e.touches[0].clientY);
                lastPinchCenter = [(e.touches[0].clientX + e.touches[1].clientX) / 2, (e.touches[0].clientY + e.touches[1].clientY) / 2];
            } else if (e.touches.length === 1) {
                startX = e.touches[0].clientX;
                startY = e.touches[0].clientY;
                startTranslateX = translateX;
                startTranslateY = translateY;
            }
        }, { passive: true });
        zoomWrapper.addEventListener('touchmove', (e) => {
            if (e.touches.length === 2) {
                e.preventDefault();
                const dist = Math.hypot(e.touches[1].clientX - e.touches[0].clientX, e.touches[1].clientY - e.touches[0].clientY);
                const delta = (dist - lastPinchDist) * 0.01;
                zoom(delta, lastPinchCenter[0], lastPinchCenter[1]);
                lastPinchDist = dist;
                lastPinchCenter = [(e.touches[0].clientX + e.touches[1].clientX) / 2, (e.touches[0].clientY + e.touches[1].clientY) / 2];
            } else if (e.touches.length === 1) {
                translateX = startTranslateX + (e.touches[0].clientX - startX);
                translateY = startTranslateY + (e.touches[0].clientY - startY);
                applyTransform();
            }
        }, { passive: false });
    </script>
</body>
</html>
